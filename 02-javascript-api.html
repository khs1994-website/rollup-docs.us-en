
<!DOCTYPE HTML>
<html lang="us-en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>02 Javascript Api · Rollup 英文文档</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-prism/prism-solarizedlight.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="03-es-module-syntax.html" />
    
    
    <link rel="prev" href="01-command-line-reference.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="https://docs.khs1994.com" target="_blank" class="custom-link">Home</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="01-command-line-reference.html">
            
                <a href="01-command-line-reference.html">
            
                    
                    Command Line Interface
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2" data-path="02-javascript-api.html">
            
                <a href="02-javascript-api.html">
            
                    
                    02 Javascript Api
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="03-es-module-syntax.html">
            
                <a href="03-es-module-syntax.html">
            
                    
                    ES Module Syntax
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="04-tutorial.html">
            
                <a href="04-tutorial.html">
            
                    
                    Tutorial
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="05-plugin-development.html">
            
                <a href="05-plugin-development.html">
            
                    
                    Plugin Development
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="06-faqs.html">
            
                <a href="06-faqs.html">
            
                    
                    Frequently Asked Questions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="07-tools.html">
            
                <a href="07-tools.html">
            
                    
                    Integrating Rollup With Other Tools
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="08-troubleshooting.html">
            
                <a href="08-troubleshooting.html">
            
                    
                    Troubleshooting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="999-big-list-of-options.html">
            
                <a href="999-big-list-of-options.html">
            
                    
                    Big List Of Options
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >02 Javascript Api</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <hr>
<h2 id="title-javascript-api">title: JavaScript API</h2>
<p>Rollup provides a JavaScript API which is usable from Node.js. You will rarely need to use this, and should probably be using the command line API unless you are extending Rollup itself or using it for something esoteric, such as generating bundles programmatically.</p>
<h3 id="rolluprollup">rollup.rollup</h3>
<p>The <code>rollup.rollup</code> function receives an input options object as parameter and returns a Promise that resolves to a <code>bundle</code> object with various properties and methods as shown below. During this step, Rollup will build the module graph and perform tree-shaking, but will not generate any output.</p>
<p>On a <code>bundle</code> object, you can call <code>bundle.generate</code> multiple times with different output options objects to generate different bundles in-memory. If you directly want to write them to disk, use <code>bundle.write</code> instead.</p>
<p>Once you&apos;re finished with the <code>bundle</code> object, you should call <code>bundle.close()</code>, which will let plugins clean up their external processes or services via the <a href="guide/en#closebundle"><code>closeBundle</code></a> hook.</p>
<pre class="language-"><code class="lang-javascript"><span class="token keyword">const</span> rollup <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;rollup&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// see below for details on the options</span>
<span class="token keyword">const</span> inputOptions <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> outputOptions <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// create a bundle</span>
  <span class="token keyword">const</span> bundle <span class="token operator">=</span> <span class="token keyword">await</span> rollup<span class="token punctuation">.</span><span class="token function">rollup</span><span class="token punctuation">(</span>inputOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bundle<span class="token punctuation">.</span>watchFiles<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// an array of file names this bundle depends on</span>

  <span class="token comment">// generate output specific code in-memory</span>
  <span class="token comment">// you can call this function multiple times on the same bundle object</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> output <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> bundle<span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span>outputOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> chunkOrAsset <span class="token keyword">of</span> output<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>chunkOrAsset<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&apos;asset&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// For assets, this contains</span>
      <span class="token comment">// {</span>
      <span class="token comment">//   fileName: string,              // the asset file name</span>
      <span class="token comment">//   source: string | Uint8Array    // the asset source</span>
      <span class="token comment">//   type: &apos;asset&apos;                  // signifies that this is an asset</span>
      <span class="token comment">// }</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;Asset&apos;</span><span class="token punctuation">,</span> chunkOrAsset<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// For chunks, this contains</span>
      <span class="token comment">// {</span>
      <span class="token comment">//   code: string,                  // the generated JS code</span>
      <span class="token comment">//   dynamicImports: string[],      // external modules imported dynamically by the chunk</span>
      <span class="token comment">//   exports: string[],             // exported variable names</span>
      <span class="token comment">//   facadeModuleId: string | null, // the id of a module that this chunk corresponds to</span>
      <span class="token comment">//   fileName: string,              // the chunk file name</span>
      <span class="token comment">//   implicitlyLoadedBefore: string[]; // entries that should only be loaded after this chunk</span>
      <span class="token comment">//   imports: string[],             // external modules imported statically by the chunk</span>
      <span class="token comment">//   importedBindings: {[imported: string]: string[]} // imported bindings per dependency</span>
      <span class="token comment">//   isDynamicEntry: boolean,       // is this chunk a dynamic entry point</span>
      <span class="token comment">//   isEntry: boolean,              // is this chunk a static entry point</span>
      <span class="token comment">//   isImplicitEntry: boolean,      // should this chunk only be loaded after other chunks</span>
      <span class="token comment">//   map: string | null,            // sourcemaps if present</span>
      <span class="token comment">//   modules: {                     // information about the modules in this chunk</span>
      <span class="token comment">//     [id: string]: {</span>
      <span class="token comment">//       renderedExports: string[]; // exported variable names that were included</span>
      <span class="token comment">//       removedExports: string[];  // exported variable names that were removed</span>
      <span class="token comment">//       renderedLength: number;    // the length of the remaining code in this module</span>
      <span class="token comment">//       originalLength: number;    // the original length of the code in this module</span>
      <span class="token comment">//       code: string | null;       // remaining code in this module</span>
      <span class="token comment">//     };</span>
      <span class="token comment">//   },</span>
      <span class="token comment">//   name: string                   // the name of this chunk as used in naming patterns</span>
      <span class="token comment">//   referencedFiles: string[]      // files referenced via import.meta.ROLLUP_FILE_URL_&lt;id&gt;</span>
      <span class="token comment">//   type: &apos;chunk&apos;,                 // signifies that this is a chunk</span>
      <span class="token comment">// }</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;Chunk&apos;</span><span class="token punctuation">,</span> chunkOrAsset<span class="token punctuation">.</span>modules<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// or write the bundle to disk</span>
  <span class="token keyword">await</span> bundle<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>outputOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// closes the bundle</span>
  <span class="token keyword">await</span> bundle<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="inputoptions-object">inputOptions object</h4>
<p>The <code>inputOptions</code> object can contain the following properties (see the <a href="guide/en#big-list-of-options">big list of options</a> for full details on these):</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> inputOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// core input options</span>
  external<span class="token punctuation">,</span>
  input<span class="token punctuation">,</span> <span class="token comment">// conditionally required</span>
  plugins<span class="token punctuation">,</span>

  <span class="token comment">// advanced input options</span>
  cache<span class="token punctuation">,</span>
  onwarn<span class="token punctuation">,</span>
  preserveEntrySignatures<span class="token punctuation">,</span>
  strictDeprecations<span class="token punctuation">,</span>

  <span class="token comment">// danger zone</span>
  acorn<span class="token punctuation">,</span>
  acornInjectPlugins<span class="token punctuation">,</span>
  context<span class="token punctuation">,</span>
  moduleContext<span class="token punctuation">,</span>
  preserveSymlinks<span class="token punctuation">,</span>
  shimMissingExports<span class="token punctuation">,</span>
  treeshake<span class="token punctuation">,</span>

  <span class="token comment">// experimental</span>
  experimentalCacheExpiry<span class="token punctuation">,</span>
  perf
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="outputoptions-object">outputOptions object</h4>
<p>The <code>outputOptions</code> object can contain the following properties (see the <a href="guide/en#big-list-of-options">big list of options</a> for full details on these):</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> outputOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// core output options</span>
  dir<span class="token punctuation">,</span>
  file<span class="token punctuation">,</span>
  format<span class="token punctuation">,</span> <span class="token comment">// required</span>
  globals<span class="token punctuation">,</span>
  name<span class="token punctuation">,</span>
  plugins<span class="token punctuation">,</span>

  <span class="token comment">// advanced output options</span>
  assetFileNames<span class="token punctuation">,</span>
  banner<span class="token punctuation">,</span>
  chunkFileNames<span class="token punctuation">,</span>
  compact<span class="token punctuation">,</span>
  entryFileNames<span class="token punctuation">,</span>
  extend<span class="token punctuation">,</span>
  externalLiveBindings<span class="token punctuation">,</span>
  footer<span class="token punctuation">,</span>
  hoistTransitiveImports<span class="token punctuation">,</span>
  inlineDynamicImports<span class="token punctuation">,</span>
  interop<span class="token punctuation">,</span>
  intro<span class="token punctuation">,</span>
  manualChunks<span class="token punctuation">,</span>
  minifyInternalExports<span class="token punctuation">,</span>
  outro<span class="token punctuation">,</span>
  paths<span class="token punctuation">,</span>
  preserveModules<span class="token punctuation">,</span>
  preserveModulesRoot<span class="token punctuation">,</span>
  sourcemap<span class="token punctuation">,</span>
  sourcemapExcludeSources<span class="token punctuation">,</span>
  sourcemapFile<span class="token punctuation">,</span>
  sourcemapPathTransform<span class="token punctuation">,</span>
  validate<span class="token punctuation">,</span>

  <span class="token comment">// danger zone</span>
  amd<span class="token punctuation">,</span>
  esModule<span class="token punctuation">,</span>
  exports<span class="token punctuation">,</span>
  freeze<span class="token punctuation">,</span>
  indent<span class="token punctuation">,</span>
  namespaceToStringTag<span class="token punctuation">,</span>
  noConflict<span class="token punctuation">,</span>
  preferConst<span class="token punctuation">,</span>
  sanitizeFileName<span class="token punctuation">,</span>
  strict<span class="token punctuation">,</span>
  systemNullSetters
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="rollupwatch">rollup.watch</h3>
<p>Rollup also provides a <code>rollup.watch</code> function that rebuilds your bundle when it detects that the individual modules have changed on disk. It is used internally when you run Rollup from the command line with the <code>--watch</code> flag. Note that when using watch mode via the JavaScript API, it is your responsibility to call <code>event.result.close()</code> in response to the <code>BUNDLE_END</code> event to allow plugins to clean up resources in the <a href="guide/en#closebundle"><code>closeBundle</code></a> hook, see below.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> rollup <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;rollup&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> watchOptions <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> watcher <span class="token operator">=</span> rollup<span class="token punctuation">.</span><span class="token function">watch</span><span class="token punctuation">(</span>watchOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>

watcher<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&apos;event&apos;</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// event.code can be one of:</span>
  <span class="token comment">//   START        &#x2014; the watcher is (re)starting</span>
  <span class="token comment">//   BUNDLE_START &#x2014; building an individual bundle</span>
  <span class="token comment">//                  * event.input will be the input options object if present</span>
  <span class="token comment">//                  * event.outputFiles cantains an array of the &quot;file&quot; or</span>
  <span class="token comment">//                    &quot;dir&quot; option values of the generated outputs</span>
  <span class="token comment">//   BUNDLE_END   &#x2014; finished building a bundle</span>
  <span class="token comment">//                  * event.input will be the input options object if present</span>
  <span class="token comment">//                  * event.outputFiles cantains an array of the &quot;file&quot; or</span>
  <span class="token comment">//                    &quot;dir&quot; option values of the generated outputs</span>
  <span class="token comment">//                  * event.duration is the build duration in milliseconds</span>
  <span class="token comment">//                  * event.result contains the bundle object that can be</span>
  <span class="token comment">//                    used to generate additional outputs by calling</span>
  <span class="token comment">//                    bundle.generate or bundle.write. This is especially</span>
  <span class="token comment">//                    important when the watch.skipWrite option is used.</span>
  <span class="token comment">//                  You should call &quot;event.result.close()&quot; once you are done</span>
  <span class="token comment">//                  generating outputs, or if you do not generate outputs.</span>
  <span class="token comment">//                  This will allow plugins to clean up resources via the</span>
  <span class="token comment">//                  &quot;closeBundle&quot; hook.</span>
  <span class="token comment">//   END          &#x2014; finished building all bundles</span>
  <span class="token comment">//   ERROR        &#x2014; encountered an error while bundling</span>
  <span class="token comment">//                  * event.error contains the error that was thrown</span>
  <span class="token comment">//                  * event.result is null for build errors and contains the</span>
  <span class="token comment">//                    bundle object for output generation errors. As with</span>
  <span class="token comment">//                    &quot;BUNDLE_END&quot;, you should call &quot;event.result.close()&quot; if</span>
  <span class="token comment">//                    present once you are done.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// This will make sure that bundles are properly closed after each run</span>
watcher<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&apos;event&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> result <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      result<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// stop watching</span>
watcher<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="watchoptions">watchOptions</h4>
<p>The <code>watchOptions</code> argument is a config (or an array of configs) that you would export from a config file.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> watchOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>inputOptions<span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">[</span>outputOptions<span class="token punctuation">]</span><span class="token punctuation">,</span>
  watch<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    buildDelay<span class="token punctuation">,</span>
    chokidar<span class="token punctuation">,</span>
    clearScreen<span class="token punctuation">,</span>
    skipWrite<span class="token punctuation">,</span>
    exclude<span class="token punctuation">,</span>
    include
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>See above for details on <code>inputOptions</code> and <code>outputOptions</code>, or consult the <a href="guide/en#big-list-of-options">big list of options</a> for info on <code>chokidar</code>, <code>include</code> and <code>exclude</code>.</p>
<h4 id="programmatically-loading-a-config-file">Programmatically loading a config file</h4>
<p>In order to aid in generating such a config, rollup exposes the helper it uses to load config files in its command line interface via a separate entry-point. This helper receives a resolved <code>fileName</code> and optionally an object containing command line parameters:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> loadConfigFile <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;rollup/dist/loadConfigFile&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;path&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> rollup <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;rollup&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// load the config file next to the current script;</span>
<span class="token comment">// the provided config object has the same effect as passing &quot;--format es&quot;</span>
<span class="token comment">// on the command line and will override the format of all outputs</span>
<span class="token function">loadConfigFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&apos;rollup.config.js&apos;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> format<span class="token punctuation">:</span> <span class="token string">&apos;es&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> options<span class="token punctuation">,</span> warnings <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// &quot;warnings&quot; wraps the default `onwarn` handler passed by the CLI.</span>
        <span class="token comment">// This prints all warnings up to this point:</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">We currently have </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>warnings<span class="token punctuation">.</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> warnings</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// This prints all deferred warnings</span>
        warnings<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// options is an array of &quot;inputOptions&quot; objects with an additional &quot;output&quot;</span>
        <span class="token comment">// property that contains an array of &quot;outputOptions&quot;.</span>
        <span class="token comment">// The following will generate all outputs for all inputs, and write them to disk the same</span>
        <span class="token comment">// way the CLI does it:</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> optionsObj <span class="token keyword">of</span> options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> bundle <span class="token operator">=</span> <span class="token keyword">await</span> rollup<span class="token punctuation">.</span><span class="token function">rollup</span><span class="token punctuation">(</span>optionsObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>optionsObj<span class="token punctuation">.</span>output<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>bundle<span class="token punctuation">.</span>write<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// You can also pass this directly to &quot;rollup.watch&quot;</span>
        rollup<span class="token punctuation">.</span><span class="token function">watch</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="01-command-line-reference.html" class="navigation navigation-prev " aria-label="Previous page: Command Line Interface">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="03-es-module-syntax.html" class="navigation navigation-next " aria-label="Next page: ES Module Syntax">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"02 Javascript Api","level":"1.2","depth":1,"next":{"title":"ES Module Syntax","level":"1.3","depth":1,"path":"03-es-module-syntax.md","ref":"03-es-module-syntax.md","articles":[]},"previous":{"title":"Command Line Interface","level":"1.1","depth":1,"path":"01-command-line-reference.md","ref":"01-command-line-reference.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-sharing","-highlight","-livereload","prism"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{"css":["prismjs/themes/prism-solarizedlight.css"]},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Rollup 英文文档","language":"us-en","links":{"sidebar":{"Home":"https://docs.khs1994.com"}},"gitbook":"*"},"file":{"path":"02-javascript-api.md","mtime":"2021-05-16T01:16:06.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-05-16T01:16:38.048Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

